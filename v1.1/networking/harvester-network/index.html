<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-networking/harvester-network">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">The open source hyperconverged infrastructure (HCI) solution for a cloud native world</title><meta data-rh="true" property="og:title" content="The open source hyperconverged infrastructure (HCI) solution for a cloud native world"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/v1.1/networking/harvester-network"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="description" content="Harvester provides three types of virtual network devices for virtual machines (VMs), including:"><meta data-rh="true" property="og:description" content="Harvester provides three types of virtual network devices for virtual machines (VMs), including:"><meta data-rh="true" name="keywords" content="Harvester,Network"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/v1.1/networking/harvester-network"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/networking/harvester-network" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/zh/v1.1/networking/harvester-network" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.1/networking/harvester-network" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="The open source hyperconverged infrastructure (HCI) solution for a cloud native world" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.920793ce.css">
<link rel="preload" href="/assets/js/runtime~main.2a6ef7bb.js" as="script">
<link rel="preload" href="/assets/js/main.bc559733.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v1.1/">v1.1</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v1.1/networking/harvester-network">v1.1</a></li><li><a class="dropdown__link" href="/v1.0/networking/harvester-network">v1.0</a></li><li><a class="dropdown__link" href="/v0.3/networking/harvester-network">v0.3</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v1.1/networking/harvester-network" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v1.1/networking/harvester-network" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__docs navbar__link--active" href="/v1.1/">Docs</a><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__blog">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__kb">Knowledge Base<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__github btn btn-secondary icon-github">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/install/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/airgap">Air Gapped Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/upgrade/automatic">Upgrade</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/upload-image">Upload Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/vm/create-vm">VM Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/volume/create-volume">Volume Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v1.1/networking/clusternetwork">Networking</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.1/networking/clusternetwork">Cluster Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v1.1/networking/harvester-network">Network</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/logging/">Logging Audit Event</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/advanced/settings">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/terraform/">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.1/troubleshooting/installation">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.1/faq">FAQ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Networking</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Network</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Network</h1><p>Harvester provides three types of virtual network devices for virtual machines (VMs), including:</p><ul><li>Management Network</li><li>VLAN Network</li><li>Untagged Network</li></ul><p>The management network is usually used for VMs whose traffic only flows inside the cluster. If your VMs need to connect to the external network, use the VLAN network or untagged network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="management-network">Management Network<a class="hash-link" href="#management-network" title="Direct link to heading">​</a></h2><p>Harvester uses <a href="https://projectcalico.docs.tigera.io/getting-started/kubernetes/flannel/flannel" target="_blank" rel="noopener noreferrer">canal</a> as its default management network. It is a built-in network that can be used directly from the cluster.
By default, the management network IP of a VM can only be accessed within the cluster nodes, and the management network IP will change after the VM reboot. This is non-typical behaviour that needs to be taken note of since VM IPs are expected to remain unchanged after a reboot.</p><p>However, you can leverage the Kubernetes <a href="https://kubevirt.io/user-guide/virtual_machines/service_objects/" target="_blank" rel="noopener noreferrer">service object</a> to create a stable IP for your VMs with the management network.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-management-network">How to use management network<a class="hash-link" href="#how-to-use-management-network" title="Direct link to heading">​</a></h3><p>Since the management network is built-in and doesn&#x27;t require extra operations, you can add it directly when configuring the VM network.</p><p><img loading="lazy" src="/assets/images/management-network-7e0ec51483792bed6b8124c98be4844d.png" width="3566" height="1236" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vlan-network">VLAN Network<a class="hash-link" href="#vlan-network" title="Direct link to heading">​</a></h2><p>The <a href="https://github.com/harvester/harvester-network-controller" target="_blank" rel="noopener noreferrer">Harvester network-controller</a> leverages the <a href="https://github.com/k8snetworkplumbingwg/multus-cni" target="_blank" rel="noopener noreferrer">multus</a> and <a href="https://www.cni.dev/plugins/current/main/bridge/" target="_blank" rel="noopener noreferrer">bridge</a> CNI plugins to implement its customized L2 bridge VLAN network. It helps to connect your VMs to the host network interface and can be accessed from internal and external networks using the physical switch.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-vlan-network">How to use VLAN network<a class="hash-link" href="#how-to-use-vlan-network" title="Direct link to heading">​</a></h3><p>To create a new VLAN network, go to the <strong>Networks &gt; Networks</strong> page and click the <strong>Create</strong> button.</p><ol><li><p>Specify the name, select the type <code>L2VlanNetwork</code>, input the VLAN ID and select the cluster network.</p><p><img loading="lazy" src="/assets/images/create-vlan-network-c2ecb7dcf8af8ce9de28048f36df7cb5.png" width="3568" height="1162" class="img_ev3q"></p></li><li><p>Configure a route to allow the hosts to connect to the VLAN network using IPv4 addresses. The CIDR and gateway of the VLAN network are mandatory parameters for the route configuration.  You can configure the route by choosing one of the following options:</p><ul><li>Auto(DHCP): the Harvester network controller will get the CIDR and gateway values from the DHCP server using the DHCP protocol. Optionally, you can specify the DHCP server address.</li></ul><p><img loading="lazy" src="/assets/images/create-network-auto-b53acb17a5362487412be5e11d8b2ed3.png" width="3564" height="1044" class="img_ev3q"></p><ul><li>Manual: You need to specify the CIDR and gateway values manually.</li></ul><p><img loading="lazy" src="/assets/images/create-network-manual-0fc114867d9ec10ac73856a78d1b264b.png" width="3562" height="1032" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-vm-with-vlan-network">Create a VM with VLAN Network<a class="hash-link" href="#create-a-vm-with-vlan-network" title="Direct link to heading">​</a></h3><p>You can now create a new VM using the VLAN network configured above:</p><ul><li>Click the <strong>Create</strong> button on the <strong>Virtual Machines</strong> page.</li><li>Specify the required parameters and click the <strong>Networks</strong> tab.</li><li>Either configure the default network to be a VLAN network or select an additional network to add.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="untagged-network">Untagged Network<a class="hash-link" href="#untagged-network" title="Direct link to heading">​</a></h2><p>As is known, the traffic under a VLAN network has a VLAN ID tag and we can use the VLAN network with <code>PVID</code> (default: 1) to communicate with any normal untagged traffic. However, some network devices may not be able to receive an explicitly tagged VLAN ID that matches the native/default VLAN on the switch the uplink belongs to. That&#x27;s the reason why we provide the untagged network.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-untagged-network">How to use untagged network<a class="hash-link" href="#how-to-use-untagged-network" title="Direct link to heading">​</a></h3><p>The way to use an untagged network is similar to the VLAN network. Before adding a new untagged network device for the VM, you have to create a new one if you don&#x27;t already have one.</p><p>To create a new untagged network, go to the <strong>Networks &gt; Networks</strong> page and click the <strong>Create</strong> button. You have to specify the name, select the type <code>Untagged Network</code> and choose the cluster network.</p><p><img loading="lazy" src="/assets/images/create-untagged-network-9e2455796e2de66bda8db70adf09246d.png" width="3574" height="1008" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/docs/networking/harvester-network.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-25T15:00:30.000Z">Oct 25, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/v1.1/networking/clusternetwork"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cluster Network</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v1.1/logging/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Logging Audit Event</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#management-network" class="table-of-contents__link toc-highlight">Management Network</a><ul><li><a href="#how-to-use-management-network" class="table-of-contents__link toc-highlight">How to use management network</a></li></ul></li><li><a href="#vlan-network" class="table-of-contents__link toc-highlight">VLAN Network</a><ul><li><a href="#how-to-use-vlan-network" class="table-of-contents__link toc-highlight">How to use VLAN network</a></li><li><a href="#create-a-vm-with-vlan-network" class="table-of-contents__link toc-highlight">Create a VM with VLAN Network</a></li></ul></li><li><a href="#untagged-network" class="table-of-contents__link toc-highlight">Untagged Network</a><ul><li><a href="#how-to-use-untagged-network" class="table-of-contents__link toc-highlight">How to use untagged network</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 harvesterhci.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2a6ef7bb.js"></script>
<script src="/assets/js/main.bc559733.js"></script>
</body>
</html>