<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-host/host-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Host Management | Harvester</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.harvesterhci.io/v1.4/host/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Host Management | Harvester"><meta data-rh="true" name="description" content="Users can view and manage Harvester nodes from the host page. The first node always defaults to be a management node of the cluster. When there are three or more nodes, the two other nodes that first joined are automatically promoted to management nodes to form a HA cluster."><meta data-rh="true" property="og:description" content="Users can view and manage Harvester nodes from the host page. The first node always defaults to be a management node of the cluster. When there are three or more nodes, the two other nodes that first joined are automatically promoted to management nodes to form a HA cluster."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.4/host/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.harvesterhci.io/v1.4/host/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://U7QCSJFCWR-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://docs.harvesterhci.io/v1.2/host"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="search" type="application/opensearchdescription+xml" title="Harvester" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5e59b31b.css">
<link rel="preload" href="/assets/js/runtime~main.1a6db359.js" as="script">
<link rel="preload" href="/assets/js/main.ffcb638f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_horizontal.svg" alt="Harvester Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v1.4/">v1.4 (dev)</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v1.4/host/">v1.4 (dev)</a></li><li><a class="dropdown__link" href="/v1.3/host/">v1.3 (latest)</a></li><li><a class="dropdown__link" href="/v1.2/host/">v1.2</a></li><li><a class="dropdown__link" href="/v1.1/host/">v1.1 (EOL)</a></li><li><a class="dropdown__link" href="/v1.0/">v1.0 (EOL)</a></li><li><a class="dropdown__link" href="/v0.3/">v0.3 (EOL)</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v1.4/host/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://harvesterhci.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvester Home<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/harvester/harvester" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/harvester/docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io/kb" target="_blank" rel="noopener noreferrer" class="dropdown__link">Knowledge Base<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.suse.com/c/?s=harvester" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancherdesktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/">Harvester Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/getting-started/deploy-ha-cluster">Getting Started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/airgap">Air Gapped Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/install/requirements">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/upgrade/index">Upgrade</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/authentication">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/v1.4/host/">Host Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/vm/index">VM Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/volume/index">Volume Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/image/upload-image">Image Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/networking/index">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/logging/harvester-logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/monitoring/harvester-monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/advanced/index">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/rancher/rancher-integration">Rancher Integration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/terraform/terraform-provider">Harvester Terraform Provider</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/troubleshooting/index">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.4/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/developer/Add-on-development-guide">Development Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v1.4/api/harvester-apis">api</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <b>Harvester</b> <b>v1.4 (dev)</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/v1.3/host/">latest version</a></b> (<!-- -->v1.3 (latest)<!-- -->).</div></div><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Host Management</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.4 (dev)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Host Management</h1></header><div class="row"><div class="col col--12"><p>Users can view and manage Harvester nodes from the host page. The first node always defaults to be a management node of the cluster. When there are three or more nodes, the two other nodes that first joined are automatically promoted to management nodes to form a HA cluster.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Because Harvester is built on top of Kubernetes and uses etcd as its database, the maximum node fault toleration is one when there are three management nodes.</p></div></div><p><img loading="lazy" alt="host.png" src="/assets/images/host-59f511ef325881a27dfe07b04af4b5a2.png" width="5118" height="2170" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-maintenance">Node Maintenance<a href="#node-maintenance" class="hash-link" aria-label="Direct link to Node Maintenance" title="Direct link to Node Maintenance">​</a></h2><p>For admin users, you can click <strong>Enable Maintenance Mode</strong> to evict all VMs from a node automatically. It will leverage the <code>VM live migration</code> feature to migrate all VMs to other nodes automatically. Note that at least two active nodes are required to use this feature.</p><p>If you want to force individual VMs to shut down instead of migrating to other nodes, add the label <code>harvesterhci.io/maintain-mode-strategy</code> and one of the following values to those VMs:</p><ul><li><code>Migrate</code>: Live-migrates the VM to another node in the cluster. This is the default behavior if the label <code>harvesterhci.io/maintain-mode-strategy</code> is not set.</li><li><code>ShutdownAndRestartAfterEnable</code>: Restarts the VM after the node switches to maintenance mode. The VM is scheduled on a different node.</li><li><code>ShutdownAndRestartAfterDisable</code>: Shuts down the VM when maintenance mode is enabled, and restarts the VM when maintenance mode is disabled. The VM stays on the same node.</li><li><code>Shutdown</code>: Shuts down the VM when maintenance mode is enabled. The VM remains powered off instead of restarting.</li></ul><p>You can force a collective shutdown of all VMs on a node on the <strong>Enable Maintenance Mode</strong> screen. This disables individual settings using the <code>harvesterhci.io/maintain-mode-strategy</code> label.</p><p>If you want to execute a special command before shutting down a VM, consider using the <a href="https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks" target="_blank" rel="noopener noreferrer">container lifecycle hook</a> <code>PreStop</code>.</p><p><img loading="lazy" alt="node-maintenance.png" src="/assets/images/node-maintenance-f7a92cb91c2123bd985fe26c2c3f283c.png" width="4394" height="1932" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cordoning-a-node">Cordoning a Node<a href="#cordoning-a-node" class="hash-link" aria-label="Direct link to Cordoning a Node" title="Direct link to Cordoning a Node">​</a></h2><p>Cordoning a node marks it as unschedulable. This feature is useful for performing short tasks on the node during small maintenance windows, like reboots, upgrades, or decommissions. When you’re done, power back on and make the node schedulable again by uncordoning it.</p><p><img loading="lazy" alt="cordon-node.png" src="/assets/images/cordon-nodes-1bd56c52995e6d73b2328bddc5f7e4fa.png" width="4402" height="1878" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deleting-a-node">Deleting a Node<a href="#deleting-a-node" class="hash-link" aria-label="Direct link to Deleting a Node" title="Direct link to Deleting a Node">​</a></h2><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Before removing a node from a Harvester cluster, determine if the remaining nodes have enough computing and storage resources to take on the workload from the node to be removed. Check the following:</p><ul><li>Current resource usage in the cluster (on the <strong>Hosts</strong> screen of the Harvester UI)</li><li>Ability of the remaining nodes to maintain enough replicas for all volumes</li></ul><p>If the remaining nodes do not have enough resources, VMs might fail to migrate and volumes might degrade when you remove a node.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-check-if-the-node-can-be-removed-from-the-cluster">1. Check if the node can be removed from the cluster.<a href="#1-check-if-the-node-can-be-removed-from-the-cluster" class="hash-link" aria-label="Direct link to 1. Check if the node can be removed from the cluster." title="Direct link to 1. Check if the node can be removed from the cluster.">​</a></h3><p>You can safely remove a control plane node depending on the quantity and availability of other nodes in the cluster.</p><ul><li><p>The cluster has three control plane nodes and one or more worker nodes.</p><p>When you remove a control plane node, a worker node will be promoted to control plane node. Harvester v1.3.0 allows you to assign a role to each node that joins a cluster. In earlier Harvester versions, worker nodes were randomly selected for promotion. If you prefer to promote specific nodes, please see <a href="/v1.4/host/#role-management">Role Management</a> and <a href="/v1.4/install/harvester-configuration#installrole">Harvester Configuration</a> for more information.</p></li><li><p>The cluster has three control plane nodes and no worker nodes.</p><p>You must add a new node to the cluster before removing a control plane node. This ensures that the cluster always has three control plane nodes and that a quorum can be formed even if one control plane node fails.</p></li><li><p>The cluster has only two control plane nodes and no worker nodes.</p><p>Removing a control plane node in this situation is not recommended because etcd data is not replicated in a single-node cluster. Failure of a single node can cause etcd to lose its quorum and shut the cluster down.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-check-the-status-of-volumes">2. Check the status of volumes.<a href="#2-check-the-status-of-volumes" class="hash-link" aria-label="Direct link to 2. Check the status of volumes." title="Direct link to 2. Check the status of volumes.">​</a></h3><ol><li><p>Access the <a href="/v1.4/troubleshooting/harvester#access-embedded-rancher-and-longhorn-dashboards">embedded Longhorn UI</a>.</p></li><li><p>Go to the <strong>Volume</strong> screen.</p></li><li><p>Verify that the state of all volumes is <strong>Healthy</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-evict-replicas-from-the-node-to-be-removed">3. Evict replicas from the node to be removed.<a href="#3-evict-replicas-from-the-node-to-be-removed" class="hash-link" aria-label="Direct link to 3. Evict replicas from the node to be removed." title="Direct link to 3. Evict replicas from the node to be removed.">​</a></h3><ol><li><p>Access the <a href="/v1.4/troubleshooting/harvester#access-embedded-rancher-and-longhorn-dashboards">embedded Longhorn UI</a>.</p></li><li><p>Go to the <strong>Node</strong> screen.</p></li><li><p>Select the node that you want to remove, click the icon in the <strong>Operation</strong> column, and then select <strong>Edit node and disks</strong>.</p></li><li><p>Configure the following settings:</p><ul><li><strong>Node Scheduling</strong>: Select <strong>Disable</strong>.</li><li><strong>Evict Requested</strong>&quot; Select <strong>True</strong>.</li></ul></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Go back to the <strong>Node</strong> screen and verify that <strong>Replicas</strong> value for the node to be removed is <strong>0</strong>.</p></li></ol><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_S0QG"><p>Eviction cannot be completed if the remaining nodes cannot accept replicas from the node to be removed. In this case, some volumes will remain in the <strong>Degraded</strong> state until you add more nodes to the cluster.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-manage-non-migratable-vms">4. Manage non-migratable VMs.<a href="#4-manage-non-migratable-vms" class="hash-link" aria-label="Direct link to 4. Manage non-migratable VMs." title="Direct link to 4. Manage non-migratable VMs.">​</a></h3><p><a href="/v1.4/vm/live-migration">Live migration</a> cannot be performed for VMs with certain properties.</p><ul><li><p>The VM has PCI passthrough devices or vGPU devices.</p><p>A PCI device is bound to a node. You must remove the PCI device from the VM, or delete the VM and then create a new VM from a backup or snapshot.</p></li><li><p>The VM has a node selector or affinity rules that bind it to the node to be removed.</p><p>You must change the node selector or affinity rules.</p></li><li><p>The VM is on a VM network that binds it to the node to be removed.</p><p>You must select a different VM network.</p></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Create a backup or snapshot for each non-migratable VM before modifying the settings that bind it to the node that you want to remove.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-evict-workloads-from-the-node-to-be-removed">5. Evict workloads from the node to be removed.<a href="#5-evict-workloads-from-the-node-to-be-removed" class="hash-link" aria-label="Direct link to 5. Evict workloads from the node to be removed." title="Direct link to 5. Evict workloads from the node to be removed.">​</a></h3><p>If your cluster is running Harvester v1.1.2 or later, you can enable <a href="/v1.4/host/#node-maintenance">Maintenance Mode</a> on the node to automatically live-migrate VMs and workloads. You can also <a href="/v1.4/vm/live-migration#starting-a-migration">manually live-migrate</a> VMs to other nodes.</p><p>All workloads have been successfully evicted if the node state is <strong>Maintenance</strong>.</p><p><img loading="lazy" alt="node-maintain-completed.png" src="/assets/images/node-maintain-completed-2ee2f4396081ba672a1e49d5cdbcf195.png" width="1708" height="780" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_S0QG"><p>If a cluster has only two control plane nodes, Harvester does not allow you to enable Maintenance Mode on any node. You can manually drain the node to be removed using the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl drain &lt;node_name&gt; --force --ignore-daemonsets --delete-local-data --pod-selector=&#x27;app!=csi-attacher,app!=csi-provisioner&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Again, removing a control plane node in this situation is <strong>not recommended</strong> because etcd data is not replicated. Failure of a single node can cause etcd to lose its quorum and shut the cluster down.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-remove-the-node">6. Remove the node.<a href="#6-remove-the-node" class="hash-link" aria-label="Direct link to 6. Remove the node." title="Direct link to 6. Remove the node.">​</a></h3><ol><li><p>On the Harvester UI, go to the <strong>Hosts</strong> screen.</p></li><li><p>Locate the node that you want to remove, and then click <strong>⋮ &gt; Delete</strong>.</p></li></ol><p><img loading="lazy" alt="delete.png" src="/assets/images/delete-node-66bb510f8160cf410a14ccafe973dbda.png" width="4398" height="1888" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-delete-rke2-services-on-the-node">7. Delete RKE2 services on the node.<a href="#7-delete-rke2-services-on-the-node" class="hash-link" aria-label="Direct link to 7. Delete RKE2 services on the node." title="Direct link to 7. Delete RKE2 services on the node.">​</a></h3><ol><li><p>Log in to the node using the root account.</p></li><li><p>Run the script <code>/opt/rke2/bin/rke2-uninstall.sh</code>.</p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>There&#x27;s a <a href="https://github.com/harvester/harvester/issues/1497" target="_blank" rel="noopener noreferrer">known issue</a> about node hard delete.
Once resolved, you can skip this step.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="role-management">Role Management<a href="#role-management" class="hash-link" aria-label="Direct link to Role Management" title="Direct link to Role Management">​</a></h2><p>Hardware issues may force you to replace the management node. In earlier Harvester versions, accurately promoting a specific worker node to a management node was not easy. Harvester v1.3.0 improves the process by introducing the following roles:</p><ul><li><strong>Management</strong>: Allows a node to be prioritized when Harvester promotes nodes to management nodes.</li><li><strong>Witness</strong>: Restricts a node to being a witness node (only functions as an etcd node) in a specific cluster.</li><li><strong>Worker</strong>: Restricts a node to being a worker node (never promoted to management node) in a specific cluster.</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Harvester currently allows only one witness node in the cluster.</p></div></div><p>For more information about assigning roles to nodes, see <a href="/v1.3/install/index">ISO Installation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-disk-management">Multi-disk Management<a href="#multi-disk-management" class="hash-link" aria-label="Direct link to Multi-disk Management" title="Direct link to Multi-disk Management">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-additional-disks">Add Additional Disks<a href="#add-additional-disks" class="hash-link" aria-label="Direct link to Add Additional Disks" title="Direct link to Add Additional Disks">​</a></h3><p>Users can view and add multiple disks as additional data volumes from the edit host page.</p><ol><li>Go to the <strong>Hosts</strong> page.</li><li>On the node you want to modify, click <strong>⋮ &gt; Edit Config</strong>.</li></ol><p><img loading="lazy" alt="Edit Config" src="/assets/images/edit-config-1ea18d102ade6b702a763f4cbb7ac694.png" width="2878" height="1178" class="img_ev3q"></p><ol start="3"><li>Select the <strong>Storage</strong> tab and click <strong>Add Disk</strong>.</li></ol><p><img loading="lazy" alt="Add Disks" src="/assets/images/add-disks-770f1d364a4d956ff1f57a224e76bbc0.png" width="2878" height="1672" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>As of Harvester v1.0.2, we no longer support adding partitions as additional disks. If you want to add it as an additional disk, be sure to delete all partitions first (e.g., using <code>fdisk</code>).</p></div></div><ol start="4"><li>Select an additional raw block device to add as an additional data volume.<ul><li>The <code>Force Formatted</code> option is required if the block device has never been force-formatted.</li></ul></li></ol><p><img loading="lazy" alt="Force Format" src="/assets/images/force-format-disks-7fbfbe35486660cc6f4d0f72f9537915.png" width="2880" height="2244" class="img_ev3q"></p><ol start="5"><li>Last, you can click <strong>⋮ &gt; Edit Config</strong> again to check the newly added disk. Meanwhile, you can also add the &quot;Host/Disk&quot; tag (details are described in the <a href="#storage-tags">next section</a>).</li></ol><p><img loading="lazy" alt="Check Result" src="/assets/images/check-added-disks-1e2efd9b76545d051ce4006a549f7032.png" width="2880" height="2424" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In order for Harvester to identify the disks, each disk needs to have a unique <a href="https://en.wikipedia.org/wiki/World_Wide_Name" target="_blank" rel="noopener noreferrer">WWN</a>. Otherwise, Harvester will refuse to add the disk.
If your disk does not have a WWN, you can format it with the <code>EXT4</code> filesystem to help Harvester recognize the disk.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you are testing Harvester in a QEMU environment, you&#x27;ll need to use QEMU v6.0 or later. Previous versions of QEMU will always generate the same WWN for NVMe disks emulation. This will cause Harvester to not add the additional disks, as explained above. However, you can still add a virtual disk with the SCSI controller. The WWN information could be added manually along with the disk attach operation. For more details, please refer to the <a href="https://github.com/harvester/vagrant-rancherd/blob/2782981b6017754d016f5b72d630dff4895f7ad6/scripts/attach-disk.sh#L75" target="_blank" rel="noopener noreferrer">script</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-tags">Storage Tags<a href="#storage-tags" class="hash-link" aria-label="Direct link to Storage Tags" title="Direct link to Storage Tags">​</a></h3><p>The storage tag feature enables only certain nodes or disks to be used for storing Longhorn volume data. For example, performance-sensitive data can use only the high-performance disks which can be tagged as <code>fast</code>, <code>ssd</code> or <code>nvme</code>, or only the high-performance nodes tagged as <code>baremetal</code>.</p><p>This feature supports both disks and nodes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h4><p>The tags can be set up through the Harvester UI on the host page:</p><ol><li>Click <code>Hosts</code> -&gt; <code>Edit Config</code> -&gt; <code>Storage</code></li><li>Click <code>Add Host/Disk Tags</code> to start typing and hit enter to add new tags.</li><li>Click <code>Save</code> to update tags.</li><li>On the <a href="/v1.4/advanced/storageclass">StorageClasses</a> page, create a new storage class and select those defined tags on the <code>Node Selector</code> and <code>Disk Selector</code> fields.</li></ol><p>All the existing scheduled volumes on the node or disk won’t be affected by the new tags.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>When multiple tags are specified for a volume, the disk and the nodes (that the disk belongs to) must have all the specified tags to become usable.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-disks">Remove disks<a href="#remove-disks" class="hash-link" aria-label="Direct link to Remove disks" title="Direct link to Remove disks">​</a></h3><p>Before removing a disk, you must first evict Longhorn replicas on the disk.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The replica data would be rebuilt to another disk automatically to keep the high availability.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="identify-the-disk-to-remove-harvester-dashboard">Identify the disk to remove (Harvester dashboard)<a href="#identify-the-disk-to-remove-harvester-dashboard" class="hash-link" aria-label="Direct link to Identify the disk to remove (Harvester dashboard)" title="Direct link to Identify the disk to remove (Harvester dashboard)">​</a></h4><ol><li>Go to the <strong>Hosts</strong> page.</li><li>On the node containing the disk, select the node name and go to the <strong>Storage</strong> tab.</li><li>Find the disk you want to remove. Let&#x27;s assume we want to remove <code>/dev/sdb</code>, and the disk&#x27;s mount point is <code>/var/lib/harvester/extra-disks/1b805b97eb5aa724e6be30cbdb373d04</code>.</li></ol><p><img loading="lazy" alt="Find disk to remove" src="/assets/images/remove-disks-harvester-find-disk-2b6cd0af1cf2f2be035635ec40763d66.png" width="3772" height="1526" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="evict-replicas-longhorn-dashboard">Evict replicas (Longhorn dashboard)<a href="#evict-replicas-longhorn-dashboard" class="hash-link" aria-label="Direct link to Evict replicas (Longhorn dashboard)" title="Direct link to Evict replicas (Longhorn dashboard)">​</a></h4><ol><li>Please follow <a href="/v1.4/troubleshooting/harvester#access-embedded-rancher-and-longhorn-dashboards">this session</a> to enable the embedded Longhorn dashboard.</li><li>Visit the Longhorn dashboard and go to the <strong>Node</strong> page.</li><li>Expand the node containing the disk. Confirm the mount point <code>/var/lib/harvester/extra-disks/1b805b97eb5aa724e6be30cbdb373d04</code> is in the disks list. </li></ol><p><img loading="lazy" alt="Check the removing disk" src="/assets/images/remove-disks-longhorn-nodes-cfb6fd5ae28f64f63345dd3e33de2a84.png" width="3616" height="726" class="img_ev3q"></p><ol start="4"><li>Select <strong>Edit node and disks</strong>.</li></ol><p><img loading="lazy" alt="Edit node and disks" src="/assets/images/remove-disks-longhorn-nodes-edit-ae615edafa3907358bd7733a48c813cd.png" width="3616" height="728" class="img_ev3q"></p><ol start="5"><li>Scroll to the disk you want to remove.</li></ol><ul><li>Set <code>Scheduling</code> to <code>Disable</code>.</li><li>Set <code>Eviction Requested</code> to <code>True</code>.</li><li>Select <strong>Save</strong>. Do not select the delete icon.</li></ul><p><img loading="lazy" alt="Evict disk" src="/assets/images/remove-disks-longhorn-nodes-evict-disk-d15ebcea68f64c4fb2a007bccc8b89ab.png" width="1608" height="966" class="img_ev3q"></p><ol start="6"><li>The disk will be disabled. Please wait until the disk replica count becomes <code>0</code> to proceed with removing the disk.</li></ol><p><img loading="lazy" alt="Wait replicas" src="/assets/images/remove-disks-longhorn-wait-replicas-9a6c61abe6fe4310d4e63533c3f4b2b4.png" width="3618" height="728" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-the-disk-harvester-dashboard">Remove the disk (Harvester dashboard)<a href="#remove-the-disk-harvester-dashboard" class="hash-link" aria-label="Direct link to Remove the disk (Harvester dashboard)" title="Direct link to Remove the disk (Harvester dashboard)">​</a></h4><ol><li>Go to the <strong>Hosts</strong> page.</li><li>On the node containing the disk, select <strong>⋮ &gt; Edit Config</strong>.</li><li>Go to the <strong>Storage</strong> tab and select <strong>x</strong>  to remove the disk.</li></ol><p><img loading="lazy" alt="Remove disk" src="/assets/images/remove-disks-harvester-remove-94cef82d865bc4ae4afaf9552831cb1d.png" width="3774" height="1520" class="img_ev3q"></p><ol start="4"><li>Select <strong>Save</strong> to remove the disk.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ksmtuned-mode">Ksmtuned Mode<a href="#ksmtuned-mode" class="hash-link" aria-label="Direct link to Ksmtuned Mode" title="Direct link to Ksmtuned Mode">​</a></h2><p><em>Available as of v1.1.0</em></p><p>Ksmtuned is a KSM automation tool deployed as a DaemonSet to run Ksmtuned on each node. It will start or stop the KSM by watching the available memory percentage ratio (<strong>i.e. Threshold Coefficient</strong>). By default, you need to manually enable Ksmtuned on each node UI. You will be able to see the KSM statistics from the node UI after 1-2 minutes.(check <a href="https://www.kernel.org/doc/html/latest/admin-guide/mm/ksm.html#ksm-daemon-sysfs-interface" target="_blank" rel="noopener noreferrer">KSM</a> for more details).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-run">Quick Run<a href="#quick-run" class="hash-link" aria-label="Direct link to Quick Run" title="Direct link to Quick Run">​</a></h3><ol><li>Go to the <strong>Hosts</strong> page.</li><li>On the node you want to modify, click <strong>⋮ &gt; Edit Config</strong>.</li><li>Select the <strong>Ksmtuned</strong> tab and select <strong>Run</strong> in <strong>Run Strategy</strong>.</li><li>(Optional) You can modify <strong>Threshold Coefficient</strong> as needed.</li></ol><p><img loading="lazy" alt="Edit Ksmtuned" src="/assets/images/edit-ksmtuned-14bde13e55cb1f5615d01d4258e8f5ce.png" width="2150" height="984" class="img_ev3q"></p><ol start="5"><li>Click <strong>Save</strong> to update.</li><li>Wait for about 1-2 minutes and you can check its <strong>Statistics</strong> by clicking <strong>Your Node &gt; Ksmtuned tab</strong>.</li></ol><p><img loading="lazy" alt="View Ksmtuned Statistics" src="/assets/images/view-ksmtuned-statistics-c3e0cac6dc3344b72e8726a6cca8990e.png" width="2002" height="402" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h3><p><strong>Run Strategy:</strong></p><ul><li><strong>Stop:</strong> Stop Ksmtuned and KSM. VMs can still use shared memory pages.</li><li><strong>Run:</strong> Run Ksmtuned.</li><li><strong>Prune:</strong> Stop Ksmtuned and prune KSM memory pages.</li></ul><p><strong>Threshold Coefficient</strong>: configures the available memory percentage ratio. If the available memory is less than the threshold, KSM will be started; otherwise, KSM will be stopped.</p><p><strong>Merge Across Nodes:</strong> specifies if pages from different NUMA nodes can be merged.</p><p><strong>Mode:</strong></p><ul><li><strong>Standard:</strong> The default mode. The control node ksmd uses about 20% of a single CPU. It uses the following parameters:</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">Boost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Decay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Maximum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Minimum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Sleep Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>High-performance:</strong> Node ksmd uses 20% to 100% of a single CPU and has higher scanning and merging efficiency. It uses the following parameters:</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">Boost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Decay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Maximum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Minimum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Sleep Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Customized:</strong> You can customize the configuration to reach the performance that you want.</li></ul><p>Ksmtuned uses the following parameters to control KSM efficiency:</p><table><thead><tr><th align="left">Parameters</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">Boost</td><td align="left">The number of scanned pages is incremented each time if the available memory is less than the <strong>Threshold Coefficient</strong>.</td></tr><tr><td align="left">Decay</td><td align="left">The number of scanned pages is decremented each time if the available memory is greater than the <strong>Threshold Coefficient</strong>.</td></tr><tr><td align="left">Maximum Pages</td><td align="left">Maximum number of pages per scan.</td></tr><tr><td align="left">Minimum Pages</td><td align="left">The minimum number of pages per scan, also the configuration for the first run.</td></tr><tr><td align="left">Sleep Time (ms)</td><td align="left">The interval between two scans, which is calculated with the formula (<strong>Sleep Time</strong> <!-- -->*<!-- --> 16 <!-- -->*<!-- --> 1024<!-- -->*<!-- --> 1024 / Total Memory). Minimum: 10ms.</td></tr></tbody></table><p><strong>For example, assume you have a 512GiB memory node that uses the following parameters:</strong></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">Boost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Decay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Maximum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Minimum Pages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Sleep Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When Ksmtuned starts, initialize <code>pages_to_scan</code> in KSM to 1000 (<strong>Minimum Pages</strong>) and set <code>sleep_millisecs</code> to 10 (50 <!-- -->*<!-- --> 16 <!-- -->*<!-- --> 1024 <!-- -->*<!-- --> 1024 / 536870912 KiB &lt; 10).</p><p>KSM starts when the available memory falls below the <strong>Threshold Coefficient</strong>. If it detects that it is running, <code>pages_to_scan</code> increments by 300 (<strong>Boost</strong>) every minute until it reaches 5000 (<strong>Maximum Pages</strong>).</p><p>KSM will stop when the available memory is above the <strong>Threshold Coefficient</strong>. If it detects that it is stopped, <code>pages_to_scan</code> decrements by 100 (<strong>Decay</strong>) every minute until it reaches 1000 (<strong>Minimum Pages</strong>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ntp-configuration">NTP Configuration<a href="#ntp-configuration" class="hash-link" aria-label="Direct link to NTP Configuration" title="Direct link to NTP Configuration">​</a></h2><p>Time synchronization is an important aspect of distributed cluster architecture. Because of this, Harvester now provides a simpler way for configuring NTP settings.</p><p>In previous Harvester versions, NTP settings were mainly configurable <a href="https://docs.harvesterhci.io/v1.2/install/harvester-configuration#osntp_servers" target="_blank" rel="noopener noreferrer">during the installation process</a>. To modify the settings, you needed to manually update the configuration file on each node.</p><p>Beginning with version v1.2.0, Harvester is supporting NTP configuration on the Harvester UI Settings screen (<strong>Advanced</strong> &gt; <strong>Settings</strong>). You can configure NTP settings for the entire Harvester cluster at any time, and the settings are applied to all nodes in the cluster.</p><p><img loading="lazy" src="/assets/images/harvester-ntp-settings-616b9206fb3897e2dd6b6b4d57155296.png" width="1906" height="877" class="img_ev3q"></p><p>You can set up multiple NTP servers at once.</p><p><img loading="lazy" src="/assets/images/harvester-ntp-settings-multiple-c63a4bd21618d58889aade68d25749c8.png" width="1618" height="808" class="img_ev3q"></p><p>You can check the settings in the <code>node.harvesterhci.io/ntp-service</code> annotation in Kubernetes nodes: </p><ul><li><code>ntpSyncStatus</code>: Status of the connection to NTP servers (possible values: <code>disabled</code>, <code>synced</code> and <code>unsynced</code>)</li><li><code>currentNtpServers</code>: List of existing NTP servers</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes harvester-node-0 -o yaml |yq -e &#x27;.metadata.annotations.[&quot;node.harvesterhci.io/ntp-service&quot;]&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;ntpSyncStatus&quot;:&quot;synced&quot;,&quot;currentNtpServers&quot;:&quot;0.suse.pool.ntp.org 1.suse.pool.ntp.org&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note:</strong></p><ol><li>Do not modify the NTP configuration file on each node. Harvester will automatically sync the settings that you configured on the Harvester UI to the nodes.</li><li>If you upgraded Harvester from an earlier version, the <strong>ntp-servers</strong> list on the Settings screen will be empty (see screenshot). You must manually configure the NTP settings because Harvester is unaware of the previous settings and is unable to detect conflicts.</li></ol></blockquote><p><img loading="lazy" src="/assets/images/harvester-ntp-settings-empty-17a0c85f9c08d558f06f97eb67927305.png" width="1544" height="245" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-native-node-configuration">Cloud-Native Node Configuration<a href="#cloud-native-node-configuration" class="hash-link" aria-label="Direct link to Cloud-Native Node Configuration" title="Direct link to Cloud-Native Node Configuration">​</a></h2><p>You may need to customize one or more nodes after installing Harvester. This process usually entails updating the <a href="/v1.3/install/update-harvester-configuration/">runtime configuration</a> and modifying files in the <code>/oem</code> directory of each node to make changes persist after rebooting.</p><p>In Harvester v1.3.0, these customizations can be described in a Kubernetes manifest and then applied to the underlying cluster using kubectl or other GitOps-centric tools such as <a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer">Fleet</a>.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Misconfigurations might compromise the ability of a Harvester node to boot up, or even damage the overall stability of the cluster. You can prevent such issues by reading the Elemental toolkit documentation to learn how to <a href="https://rancher.github.io/elemental-toolkit/docs/customizing/" target="_blank" rel="noopener noreferrer">correctly customize Elemental</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-cloudinit-resource">Creating a CloudInit Resource<a href="#creating-a-cloudinit-resource" class="hash-link" aria-label="Direct link to Creating a CloudInit Resource" title="Direct link to Creating a CloudInit Resource">​</a></h3><p>Harvester node customization is bounded only by your creativity and by what the Elemental toolkit markup can syntactically express. The documentation, therefore, cannot provide an exhaustive list of possible customizations and use cases.</p><p><strong>Example: You want to add an SSH authorized key for the default <code>rancher</code> user on all nodes.</strong></p><p>Start by creating a Kubernetes manifest for a CloudInit resource.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">file: ssh_access.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.harvesterhci.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloudInit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ssh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">matchSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">filename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 99_ssh.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">contents</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    stages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        - authorized_keys:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            rancher:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              - ssh-ed25519 AAAA...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This manifest describes an Elemental cloud-init document that will be applied to <em>all nodes</em> (because the empty <code>matchSelector: {}</code> field matches everything). The YAML document in the <code>.spec.contents</code> field will be rendered to <code>/oem/99_ssh.yaml</code> (because of the <code>.spec.filename</code> field.)</p><p>Apply this example using the command <code>kubectl apply -f ssh_access.yaml</code>.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Reboot the relevant Harvester nodes so that the Elemental toolkit executor can apply the new configuration at boot.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloudinit-resource-spec">CloudInit Resource Spec<a href="#cloudinit-resource-spec" class="hash-link" aria-label="Direct link to CloudInit Resource Spec" title="Direct link to CloudInit Resource Spec">​</a></h4><table><thead><tr><th>Field</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>matchSelector</td><td>Yes</td><td>Setting that allows you to specify the nodes that will receive the configuration changes.</td></tr><tr><td>filename</td><td>Yes</td><td>Name of the file that appears in <code>/oem</code>.</td></tr><tr><td>contents</td><td>Yes</td><td>Elemental toolkit cloud-init-style file that will be rendered to a file in <code>/oem</code>.</td></tr><tr><td>paused</td><td>No</td><td>When set to <code>true</code>, the file will not be updated on nodes as it changes.</td></tr></tbody></table><p>The <code>matchSelector</code> field can be used to target specific nodes or groups of nodes based on their labels.</p><p>Example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">matchSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;harvester-node-1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>All label key-value pairs listed in the <code>matchSelector</code> field must match the labels of the intended nodes. </p><p>In the following example, <code>matchSelector</code> will match <code>harvester-node-1</code> only if that node also has the <code>example.com/role</code> label with the value <code>role-a</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">matchSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;harvester-node-1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">example.com/role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;role-a&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-a-cloudinit-resource">Updating a CloudInit Resource<a href="#updating-a-cloudinit-resource" class="hash-link" aria-label="Direct link to Updating a CloudInit Resource" title="Direct link to Updating a CloudInit Resource">​</a></h3><p>You can use the command <code>kubectl edit</code> to update a CloudInit resource. However, there is a caveat if the <code>matchSelector</code> field is updated to exclude one or more nodes from the customization. See the note in the <a href="#deleting-a-cloudinit-resource">Deleting a CloudInit Resource</a> section regarding rolling back customizations.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl edit cloudinit CLOUDINIT_NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deleting-a-cloudinit-resource">Deleting a CloudInit Resource<a href="#deleting-a-cloudinit-resource" class="hash-link" aria-label="Direct link to Deleting a CloudInit Resource" title="Direct link to Deleting a CloudInit Resource">​</a></h3><p>You can use the command <code>kubectl delete</code> to remove a CloudInit resource from the Harvester cluster.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl delete cloudinit CLOUDINIT_NAME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Harvester is unable to &quot;roll back&quot; previously described customizations because the CloudInit resource can describe anything that can be expressed as an Elemental toolkit customization, including arbitrary shell commands.</p><p>In the <a href="#creating-a-cloudinit-resource">Creating a CloudInit Resource</a> example, the YAML file contains the <code>authorized_keys</code> stanza. This is an append-only action in the Elemental toolkit. When the resource is changed or deleted, the <code>authorized_keys</code> file in Rancher will still contain the old public key.</p><p><strong>You are responsible for amending or creating a CloudInit resource that rolls the changes back (if necessary) before you reboot the node.</strong></p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-cloudinit-rollouts">Troubleshooting CloudInit Rollouts<a href="#troubleshooting-cloudinit-rollouts" class="hash-link" aria-label="Direct link to Troubleshooting CloudInit Rollouts" title="Direct link to Troubleshooting CloudInit Rollouts">​</a></h3><p>If an Elemental toolkit cloud-init document does not appear in <code>/oem</code> or does not contain the expected contents, the status block of the CloudInit resource might contain useful hints.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl get cloudinit CLOUDINIT_NAME -o yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rollouts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">harvester-dngmf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-02-28T22:31:23Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloudInitApplicable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Applicable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-02-28T22:31:23Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Local file checksum is the same as the CloudInit checksum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloudInitChecksumMatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OutOfSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-02-28T22:31:23Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 99_ssh.yaml is present under /oem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloudInitPresentOnDisk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Present</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>harvester-node-manager</code> pod(s) in the <code>harvester-system</code> namespace may also contain some hints as to why it is not rendering a file to a node.
This pod is part of a daemonset, so it may be worth checking the pod that is running on the node of interest.</p></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/harvester/docs/edit/main/docs/host/host.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-10-15T06:16:29.000Z">Oct 15, 2024</time></b></span></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v1.4/authentication"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Authentication</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v1.4/vm/index"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create a Virtual Machine</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#node-maintenance" class="table-of-contents__link toc-highlight">Node Maintenance</a></li><li><a href="#cordoning-a-node" class="table-of-contents__link toc-highlight">Cordoning a Node</a></li><li><a href="#deleting-a-node" class="table-of-contents__link toc-highlight">Deleting a Node</a><ul><li><a href="#1-check-if-the-node-can-be-removed-from-the-cluster" class="table-of-contents__link toc-highlight">1. Check if the node can be removed from the cluster.</a></li><li><a href="#2-check-the-status-of-volumes" class="table-of-contents__link toc-highlight">2. Check the status of volumes.</a></li><li><a href="#3-evict-replicas-from-the-node-to-be-removed" class="table-of-contents__link toc-highlight">3. Evict replicas from the node to be removed.</a></li><li><a href="#4-manage-non-migratable-vms" class="table-of-contents__link toc-highlight">4. Manage non-migratable VMs.</a></li><li><a href="#5-evict-workloads-from-the-node-to-be-removed" class="table-of-contents__link toc-highlight">5. Evict workloads from the node to be removed.</a></li><li><a href="#6-remove-the-node" class="table-of-contents__link toc-highlight">6. Remove the node.</a></li><li><a href="#7-delete-rke2-services-on-the-node" class="table-of-contents__link toc-highlight">7. Delete RKE2 services on the node.</a></li></ul></li><li><a href="#role-management" class="table-of-contents__link toc-highlight">Role Management</a></li><li><a href="#multi-disk-management" class="table-of-contents__link toc-highlight">Multi-disk Management</a><ul><li><a href="#add-additional-disks" class="table-of-contents__link toc-highlight">Add Additional Disks</a></li><li><a href="#storage-tags" class="table-of-contents__link toc-highlight">Storage Tags</a></li><li><a href="#remove-disks" class="table-of-contents__link toc-highlight">Remove disks</a></li></ul></li><li><a href="#ksmtuned-mode" class="table-of-contents__link toc-highlight">Ksmtuned Mode</a><ul><li><a href="#quick-run" class="table-of-contents__link toc-highlight">Quick Run</a></li><li><a href="#parameters" class="table-of-contents__link toc-highlight">Parameters</a></li></ul></li><li><a href="#ntp-configuration" class="table-of-contents__link toc-highlight">NTP Configuration</a></li><li><a href="#cloud-native-node-configuration" class="table-of-contents__link toc-highlight">Cloud-Native Node Configuration</a><ul><li><a href="#creating-a-cloudinit-resource" class="table-of-contents__link toc-highlight">Creating a CloudInit Resource</a></li><li><a href="#updating-a-cloudinit-resource" class="table-of-contents__link toc-highlight">Updating a CloudInit Resource</a></li><li><a href="#deleting-a-cloudinit-resource" class="table-of-contents__link toc-highlight">Deleting a CloudInit Resource</a></li><li><a href="#troubleshooting-cloudinit-rollouts" class="table-of-contents__link toc-highlight">Troubleshooting CloudInit Rollouts</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1a6db359.js"></script>
<script src="/assets/js/main.ffcb638f.js"></script>
</body>
</html>