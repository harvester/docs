"use strict";(self.webpackChunkharvester_docs=self.webpackChunkharvester_docs||[]).push([[14057],{83608:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>s});n(67294);var a=n(3905);const r={id:"index",sidebar_position:1,sidebar_label:"Settings",title:"Settings"},i=void 0,o={unversionedId:"advanced/index",id:"version-v1.4/advanced/index",title:"Settings",description:"The following is a list of advanced settings that you can use in Harvester. You can modify the settings.harvesterhci.io custom resource using both the Harvester UI and the kubectl command.",source:"@site/versioned_docs/version-v1.4/advanced/settings.md",sourceDirName:"advanced",slug:"/advanced/index",permalink:"/v1.4/advanced/index",draft:!1,editUrl:"https://github.com/harvester/docs/edit/main/versioned_docs/version-v1.4/advanced/settings.md",tags:[],version:"v1.4",lastUpdatedAt:1732848704,formattedLastUpdatedAt:"Nov 29, 2024",sidebarPosition:1,frontMatter:{id:"index",sidebar_position:1,sidebar_label:"Settings",title:"Settings"},sidebar:"api",previous:{title:"Monitoring",permalink:"/v1.4/monitoring/harvester-monitoring"},next:{title:"StorageClass",permalink:"/v1.4/advanced/storageclass"}},l={},s=[{value:"General Settings",id:"general-settings",level:2},{value:"<code>additional-ca</code>",id:"additional-ca",level:3},{value:"<code>auto-disk-provision-paths</code> Experimental",id:"auto-disk-provision-paths-experimental",level:3},{value:"<code>auto-rotate-rke2-certs</code>",id:"auto-rotate-rke2-certs",level:3},{value:"<code>backup-target</code>",id:"backup-target",level:3},{value:"<code>cluster-registration-url</code>",id:"cluster-registration-url",level:3},{value:"<code>containerd-registry</code>",id:"containerd-registry",level:3},{value:"<code>csi-driver-config</code>",id:"csi-driver-config",level:3},{value:"<code>default-vm-termination-grace-period-seconds</code>",id:"default-vm-termination-grace-period-seconds",level:3},{value:"<code>http-proxy</code>",id:"http-proxy",level:3},{value:"<code>log-level</code>",id:"log-level",level:3},{value:"<code>longhorn-v2-data-engine-enabled</code> Experimental",id:"longhorn-v2-data-engine-enabled-experimental",level:3},{value:"<code>ntp-servers</code>",id:"ntp-servers",level:3},{value:"<code>overcommit-config</code>",id:"overcommit-config",level:3},{value:"<code>release-download-url</code>",id:"release-download-url",level:3},{value:"<code>server-version</code>",id:"server-version",level:3},{value:"<code>ssl-certificates</code>",id:"ssl-certificates",level:3},{value:"<code>ssl-parameters</code>",id:"ssl-parameters",level:3},{value:"<code>storage-network</code>",id:"storage-network",level:3},{value:"<code>support-bundle-image</code>",id:"support-bundle-image",level:3},{value:"<code>support-bundle-namespaces</code>",id:"support-bundle-namespaces",level:3},{value:"<code>support-bundle-timeout</code>",id:"support-bundle-timeout",level:3},{value:"<code>support-bundle-expiration</code>",id:"support-bundle-expiration",level:3},{value:"<code>support-bundle-node-collection-timeout</code>",id:"support-bundle-node-collection-timeout",level:3},{value:"<code>upgrade-checker-enabled</code>",id:"upgrade-checker-enabled",level:3},{value:"<code>upgrade-checker-url</code>",id:"upgrade-checker-url",level:3},{value:"<code>upgrade-config</code>",id:"upgrade-config",level:3},{value:"<code>vip-pools</code>",id:"vip-pools",level:3},{value:"<code>vm-force-reset-policy</code>",id:"vm-force-reset-policy",level:3},{value:"<code>volume-snapshot-class</code>",id:"volume-snapshot-class",level:3},{value:"UI Settings",id:"ui-settings",level:2},{value:"<code>branding</code>",id:"branding",level:3},{value:"<code>ui-index</code>",id:"ui-index",level:3},{value:"<code>ui-path</code>",id:"ui-path",level:3},{value:"<code>ui-plugin-index</code>",id:"ui-plugin-index",level:3},{value:"<code>ui-source</code>",id:"ui-source",level:3}],p={toc:s},u="wrapper";function d({components:e,...t}){return(0,a.kt)(u,{...p,...t,components:e,mdxType:"MDXLayout"},(0,a.kt)("head",null,(0,a.kt)("link",{rel:"canonical",href:"https://docs.harvesterhci.io/v1.4/advanced/index"})),(0,a.kt)("p",null,"The following is a list of advanced settings that you can use in Harvester. You can modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"settings.harvesterhci.io")," custom resource using both the Harvester UI and the ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," command."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"\xa0"),(0,a.kt)("h2",{id:"general-settings"},"General Settings"),(0,a.kt)("h3",{id:"additional-ca"},(0,a.kt)("inlineCode",{parentName:"h3"},"additional-ca")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Additional trusted CA certificates that enable Harvester to access external services."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Changing this setting might cause single-node clusters to temporarily become unavailable or inaccessible.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"-----BEGIN CERTIFICATE-----\nSOME-CA-CERTIFICATES\n-----END CERTIFICATE-----\n")),(0,a.kt)("h3",{id:"auto-disk-provision-paths-experimental"},(0,a.kt)("inlineCode",{parentName:"h3"},"auto-disk-provision-paths")," ","[Experimental]"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that allows Harvester to automatically add disks that match the specified glob pattern as VM storage."),(0,a.kt)("p",null,"This setting only adds formatted disks that are mounted to the system. When specifying multiple patterns, separate values using commas."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"This setting is applied to ",(0,a.kt)("strong",{parentName:"p"},"all nodes")," in the cluster. All data in the storage devices ",(0,a.kt)("strong",{parentName:"p"},"will be destroyed"),".")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("p",null,"The following example adds disks that match the glob pattern ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/sd*")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"/dev/hd*"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"/dev/sd*,/dev/hd*\n")),(0,a.kt)("h3",{id:"auto-rotate-rke2-certs"},(0,a.kt)("inlineCode",{parentName:"h3"},"auto-rotate-rke2-certs")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.3.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that allows you to automatically rotate certificates for RKE2 services. This setting is disabled by default."),(0,a.kt)("p",null,"Use the field ",(0,a.kt)("inlineCode",{parentName:"p"},"expiringInHours")," to specify the validity period of each certificate (",(0,a.kt)("inlineCode",{parentName:"p"},"1")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"8759")," hours). Harvester automatically replaces the certificate before the specified period ends."),(0,a.kt)("p",null,"For more information, see the ",(0,a.kt)("strong",{parentName:"p"},"Certificate Rotation")," section of the ",(0,a.kt)("a",{parentName:"p",href:"https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/manage-clusters/rotate-certificates"},"Rancher")," and ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rke2.io/advanced#certificate-rotation"},"RKE2")," documentation."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},'{"enable":false,"expiringInHours":240}')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{"enable":true,"expiringInHours":48}\n')),(0,a.kt)("h3",{id:"backup-target"},(0,a.kt)("inlineCode",{parentName:"h3"},"backup-target")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Custom backup target used to store VM backups. "),(0,a.kt)("p",null,"For more information, see the ",(0,a.kt)("a",{parentName:"p",href:"https://longhorn.io/docs/1.6.0/snapshots-and-backups/backup-and-restore/set-backup-target/#set-up-aws-s3-backupstore"},"Longhorn documentation"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "s3",\n  "endpoint": "https://s3.endpoint.svc",\n  "accessKeyId": "test-access-key-id",\n  "secretAccessKey": "test-access-key",\n  "bucketName": "test-bup",\n  "bucketRegion": "us\u2011east\u20112",\n  "cert": "",\n  "virtualHostedStyle": false\n}\n')),(0,a.kt)("h3",{id:"cluster-registration-url"},(0,a.kt)("inlineCode",{parentName:"h3"},"cluster-registration-url")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": URL used to import the Harvester cluster into Rancher for multi-cluster management."),(0,a.kt)("p",null,"When you configure this setting, a new pod called ",(0,a.kt)("inlineCode",{parentName:"p"},"cattle-cluster-agent-*")," is created in the namespace ",(0,a.kt)("inlineCode",{parentName:"p"},"cattle-system")," for registration purposes. This pod uses the container image ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher/rancher-agent:related-version"),", which is not packed into the Harvester ISO and is instead determined by Rancher. The ",(0,a.kt)("inlineCode",{parentName:"p"},"related-version")," is usually the same as the Rancher version. For example, when you register Harvester to Rancher v2.7.9, the image is ",(0,a.kt)("inlineCode",{parentName:"p"},"rancher/rancher-agent:v2.7.9"),". For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/other-installation-methods/air-gapped-helm-cli-install/publish-images#1-find-the-required-assets-for-your-rancher-version"},"Find the required assets for your Rancher version")," in the Rancher documentation."),(0,a.kt)("p",null,"Depending on your Harvester settings, the image is downloaded from either of the following locations:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Harvester containerd-registry: You can configure a ",(0,a.kt)("a",{parentName:"li",href:"#containerd-registry"},"private registry for the Harvester cluster"),"."),(0,a.kt)("li",{parentName:"ul"},"Docker Hub (docker.io): This is the default option when you do not configure a private registry in Rancher.")),(0,a.kt)("p",null,"Alternatively, you can obtain a copy of the image and manually upload it to all Harvester nodes."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://172.16.0.1/v3/import/w6tp7dgwjj549l88pr7xmxb4x6m54v5kcplvhbp9vv2wzqrrjhrc7c_c-m-zxbbbck9.yaml\n")),(0,a.kt)("h3",{id:"containerd-registry"},(0,a.kt)("inlineCode",{parentName:"h3"},"containerd-registry")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Configuration of a private registry created for the Harvester cluster. "),(0,a.kt)("p",null,"The value is stored in the ",(0,a.kt)("inlineCode",{parentName:"p"},"registries.yaml")," file of each node (path: ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/rancher/rke2/registries.yaml"),"). For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rke2.io/install/containerd_registry_configuration"},"Containerd Registry Configuration")," in the RKE2 documentation."),(0,a.kt)("p",null,"For security purposes, Harvester automatically removes the username and password configured for the private registry after those credentials are stored in the ",(0,a.kt)("inlineCode",{parentName:"p"},"registries.yaml")," file."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"containerd-registry",src:n(57984).Z,width:"1397",height:"803"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Mirrors": {\n    "docker.io": {\n      "Endpoints": ["https://myregistry.local:5000"],\n      "Rewrites": null\n    }\n  },\n  "Configs": {\n    "myregistry.local:5000": {\n      "Auth": {\n        "Username": "testuser",\n        "Password": "testpassword"\n      },\n      "TLS": {\n        "InsecureSkipVerify": false\n      }\n    }\n  }\n}\n')),(0,a.kt)("h3",{id:"csi-driver-config"},(0,a.kt)("inlineCode",{parentName:"h3"},"csi-driver-config")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Configuration necessary for using third-party CSI drivers installed in the Harvester cluster."),(0,a.kt)("p",null,"You must configure the following information before using features related to backups and snapshots:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Provisioner for the installed third-party CSI driver"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"volumeSnapshotClassName"),": Name of the ",(0,a.kt)("inlineCode",{parentName:"li"},"VolumeSnapshotClass")," used to create volume snapshots or VM snapshots."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"backupVolumeSnapshotClassName"),": Name of the ",(0,a.kt)("inlineCode",{parentName:"li"},"VolumeSnapshotClass")," used to create VM backups.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "driver.longhorn.io": {\n    "volumeSnapshotClassName": "longhorn-snapshot",\n    "backupVolumeSnapshotClassName": "longhorn"\n  }\n}\n')),(0,a.kt)("h3",{id:"default-vm-termination-grace-period-seconds"},(0,a.kt)("inlineCode",{parentName:"h3"},"default-vm-termination-grace-period-seconds")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Number of seconds Harvester waits before forcibly shutting down a VM that was stopped using the Harvester UI."),(0,a.kt)("p",null,"Harvester sends a graceful shutdown signal to any VM that is stopped using the Harvester UI. If the graceful shutdown process is not completed within the specified number of seconds, Harvester forcibly shuts down the VM."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"120")),(0,a.kt)("h3",{id:"http-proxy"},(0,a.kt)("inlineCode",{parentName:"h3"},"http-proxy")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": HTTP proxy used to access external services, including downloading of images and backup to S3 services."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Changing this setting might cause single-node clusters to temporarily become unavailable or inaccessible.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"{}")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Proxy URL for HTTP requests: ",(0,a.kt)("inlineCode",{parentName:"li"},'"httpProxy": "http://<username>:<pswd>@<ip>:<port>"')),(0,a.kt)("li",{parentName:"ul"},"Proxy URL for HTTPS requests: ",(0,a.kt)("inlineCode",{parentName:"li"},'"httpsProxy": "https://<username>:<pswd>@<ip>:<port>"')),(0,a.kt)("li",{parentName:"ul"},"Comma-separated list of hostnames and/or CIDRs: ",(0,a.kt)("inlineCode",{parentName:"li"},'"noProxy": "<hostname | CIDR>"'))),(0,a.kt)("p",null,"You must specify key information in the ",(0,a.kt)("inlineCode",{parentName:"p"},"noProxy")," field if you configured the following options or settings: "),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Configured option/setting"),(0,a.kt)("th",{parentName:"tr",align:null},"Required value in ",(0,a.kt)("inlineCode",{parentName:"th"},"noProxy")),(0,a.kt)("th",{parentName:"tr",align:null},"Reason"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"httpProxy")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"httpsProxy")),(0,a.kt)("td",{parentName:"tr",align:null},"Harvester node's CIDR"),(0,a.kt)("td",{parentName:"tr",align:null},"Not specifying the node's CIDR can break the Harvester cluster.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"cluster-registration-url")),(0,a.kt)("td",{parentName:"tr",align:null},"Host of ",(0,a.kt)("inlineCode",{parentName:"td"},"cluster-registration-url")),(0,a.kt)("td",{parentName:"tr",align:null},"The host information allows you to access the Harvester cluster from Rancher.")))),(0,a.kt)("p",null,"Harvester appends necessary addresses to user-specified ",(0,a.kt)("inlineCode",{parentName:"p"},"noProxy")," values (for example,",(0,a.kt)("inlineCode",{parentName:"p"},"localhost,127.0.0.1,0.0.0.0,10.0.0.0/8,longhorn-system,cattle-system,cattle-system.svc,harvester-system,.svc,.cluster.local"),"). This ensures that internal traffic flows as expected."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "httpProxy": "http://my.proxy",\n  "httpsProxy": "https://my.proxy",\n  "noProxy": "some.internal.svc,172.16.0.0/16"\n}\n')),(0,a.kt)("h3",{id:"log-level"},(0,a.kt)("inlineCode",{parentName:"h3"},"log-level")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Log level for the Harvester host."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"info")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"panic"),": Least verbose log level"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fatal")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"error")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"warn"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"warning")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"info")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"debug")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"trace"),": Most verbose log level")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"debug\n")),(0,a.kt)("h3",{id:"longhorn-v2-data-engine-enabled-experimental"},(0,a.kt)("inlineCode",{parentName:"h3"},"longhorn-v2-data-engine-enabled")," ","[Experimental]"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.4.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that enables and disables the Longhorn V2 Data Engine."),(0,a.kt)("p",null,"When set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", Harvester automatically loads the kernel modules required by the Longhorn V2 Data Engine, and attempts to allocate 1024 \xd7 2 MiB-sized huge pages (for example, 2 GiB of RAM) on all nodes. "),(0,a.kt)("p",null,"Changing this setting automatically restarts RKE2 on all nodes but does not affect running virtual machine workloads."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},'If you encounter error messages that include the phrase "not enough hugepages-2Mi capacity", allow some time for the error to be resolved. If the error persists, reboot the affected nodes.'),(0,a.kt)("p",{parentName:"admonition"},"To disable the Longhorn V2 Data Engine on specific nodes (for example, nodes with less processing and memory resources), go to the ",(0,a.kt)("strong",{parentName:"p"},"Hosts")," screen and add the following label to the target nodes:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"label: ",(0,a.kt)("inlineCode",{parentName:"li"},"node.longhorn.io/disable-v2-data-engine")),(0,a.kt)("li",{parentName:"ul"},"value: ",(0,a.kt)("inlineCode",{parentName:"li"},"true")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"false")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"true\n")),(0,a.kt)("h3",{id:"ntp-servers"},(0,a.kt)("inlineCode",{parentName:"h3"},"ntp-servers")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": NTP servers for time synchronization on Harvester nodes."),(0,a.kt)("p",null,"You can define NTP servers during ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/install/harvester-configuration#osntp_servers"},"installation")," and update the addresses after installation."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Changes to the server address list are applied to all nodes.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),': ""'),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "ntpServers": [\n    "0.suse.pool.ntp.org",\n    "1.suse.pool.ntp.org"\n  ]\n}\n')),(0,a.kt)("h3",{id:"overcommit-config"},(0,a.kt)("inlineCode",{parentName:"h3"},"overcommit-config")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Percentage of physical compute, memory, and storage resources that can be allocated for VM use."),(0,a.kt)("p",null,"Overcommitting is used to optimize physical resource allocation, particularly when VMs are not expected to fully consume the allocated resources most of the time. Setting values greater than 100% allows scheduling of multiple VMs even when physical resources are notionally fully allocated. "),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default values"),": ",(0,a.kt)("inlineCode",{parentName:"p"},'{ "cpu":1600, "memory":150, "storage":200 }')),(0,a.kt)("p",null,"With the default values, it would be possible to schedule the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"16x the number of physical CPUs on a host"),(0,a.kt)("li",{parentName:"ul"},"1.5x the amount of physical RAM on a host"),(0,a.kt)("li",{parentName:"ul"},"2x the amount of physical storage in Longhorn")),(0,a.kt)("p",null,"A VM that is configured to use 2 CPUs (equivalent to 2,000 milliCPU) can consume the full allocation as long as the resources are available. However, if the host is running heavy workloads and an overcommit value is set (for example, 1600%), Harvester only requests 125 milliCPU from the Kubernetes scheduler (2000/16 = 125 milliCPU)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "cpu": 1000,\n  "memory": 200,\n  "storage": 300\n}\n')),(0,a.kt)("h3",{id:"release-download-url"},(0,a.kt)("inlineCode",{parentName:"h3"},"release-download-url")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": URL for downloading the software required for upgrades."),(0,a.kt)("p",null,"Harvester retrieves the ISO URL and checksum value from the ",(0,a.kt)("inlineCode",{parentName:"p"},"${URL}/${VERSION}/version.yaml")," file that is accessible through the configured URL."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"https://releases.rancher.com/harvester")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example (version.yaml)"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"apiVersion: harvesterhci.io/v1beta1\nkind: Version\nmetadata:\n  name: ${VERSION}\n  namespace: harvester-system\nspec:\n  isoChecksum: ${ISO_CHECKSUM}\n  isoURL: ${ISO_URL}\n")),(0,a.kt)("h3",{id:"server-version"},(0,a.kt)("inlineCode",{parentName:"h3"},"server-version")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Version of Harvester that is installed on Harvester nodes."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"v1.0.0-abcdef-head\n")),(0,a.kt)("h3",{id:"ssl-certificates"},(0,a.kt)("inlineCode",{parentName:"h3"},"ssl-certificates")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": SSL certificates for the Harvester UI and API."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Changing this setting might cause single-node clusters to temporarily become unavailable or inaccessible.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"{}")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "ca": "-----BEGIN CERTIFICATE-----\\nSOME-CERTIFICATE-ENCODED-IN-PEM-FORMAT\\n-----END CERTIFICATE-----",\n  "publicCertificate": "-----BEGIN CERTIFICATE-----\\nSOME-CERTIFICATE-ENCODED-IN-PEM-FORMAT\\n-----END CERTIFICATE-----",\n  "privateKey": "-----BEGIN RSA PRIVATE KEY-----\\nSOME-PRIVATE-KEY-ENCODED-IN-PEM-FORMAT\\n-----END RSA PRIVATE KEY-----"\n}\n')),(0,a.kt)("h3",{id:"ssl-parameters"},(0,a.kt)("inlineCode",{parentName:"h3"},"ssl-parameters")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Enabled SSL/TLS protocols and ciphers of the Harvester UI and API."),(0,a.kt)("admonition",{title:"important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"If you misconfigure this setting and are unable to access the Harvester UI and API, see ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/troubleshooting/harvester#i-cant-access-harvester-after-i-changed-ssltls-enabled-protocols-and-ciphers"},"Troubleshooting"),".")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"protocols"),": Enabled protocols. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ciphers"),": Enabled ciphers.")),(0,a.kt)("p",null,"For more information about the supported options, see ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/#ssl-protocols"},(0,a.kt)("inlineCode",{parentName:"a"},"ssl-protocols"))," and ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/#ssl-ciphers"},(0,a.kt)("inlineCode",{parentName:"a"},"ssl-ciphers"))," in the Ingress-Nginx Controller documentation."),(0,a.kt)("p",null,"If you do not specify any values, Harvester uses ",(0,a.kt)("inlineCode",{parentName:"p"},"TLSv1.2")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "protocols": "TLSv1.2 TLSv1.3",\n  "ciphers": "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305"\n}\n')),(0,a.kt)("h3",{id:"storage-network"},(0,a.kt)("inlineCode",{parentName:"h3"},"storage-network")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Segregated storage network for Longhorn traffic."),(0,a.kt)("p",null,"By default, Longhorn uses the management network, which is limited to a single interface and shared with cluster-wide workloads. If your implementation requires network segregation, you can use a ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/advanced/storagenetwork"},"storage network")," to isolate Longhorn in-cluster data traffic."),(0,a.kt)("admonition",{title:"important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Shut down all VMs before configuring this setting."),(0,a.kt)("p",{parentName:"admonition"},"Specify an IP range in the IPv4 CIDR format. The number of IPs must be four times the number of your cluster nodes.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),': ""'),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "vlan": 100,\n  "clusterNetwork": "storage",\n  "range": "192.168.0.0/24"\n}\n')),(0,a.kt)("h3",{id:"support-bundle-image"},(0,a.kt)("inlineCode",{parentName:"h3"},"support-bundle-image")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Support bundle image, with various versions available in ",(0,a.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/rancher/support-bundle-kit/tags"},"rancher/support-bundle-kit"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"support-bundle-kit")," image that is packed into the Harvester ISO and is specific to each Harvester release."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("p",null,"In this example, the default image tag of the cluster is ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.0.25"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n  "repository": "rancher/support-bundle-kit",\n  "tag": "v0.0.25",\n  "imagePullPolicy": "IfNotPresent"\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and values"),":"),(0,a.kt)("p",null,"The value is a JSON object literal that contains the following key-value pairs:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"repository"),": Name of the repository that stores the support bundle image."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tag"),":  Tag assigned to the support bundle image."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"imagePullPolicy"),": Pull policy of the support bundle image. The supported values are ",(0,a.kt)("inlineCode",{parentName:"li"},"IfNotPresent"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"Always"),", and ",(0,a.kt)("inlineCode",{parentName:"li"},"Never"),". For more information, see ",(0,a.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy"},"Image pull policy")," in the Kubernetes documentation.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Notes"),":"),(0,a.kt)("p",null,"The CLI shows the following ",(0,a.kt)("inlineCode",{parentName:"p"},"support-bundle-image")," setting object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: harvesterhci.io/v1beta1\ndefault: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.25","imagePullPolicy":"IfNotPresent"}\'  // default value, automatically set\nkind: Setting\nmetadata:\n  name: support-bundle-image\n...\nstatus: {}\n')),(0,a.kt)("p",null,"After some time, a newer image tag (",(0,a.kt)("inlineCode",{parentName:"p"},"v0.0.36"),") is specified in the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field using the Harvester UI."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(8065).Z,width:"1962",height:"518"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: harvesterhci.io/v1beta1\ndefault: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.25","imagePullPolicy":"IfNotPresent"}\'\nkind: Setting\nmetadata:\n  name: support-bundle-image\n...\nstatus: {}\nvalue: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.36","imagePullPolicy":"IfNotPresent"}\'  // your setting value\n')),(0,a.kt)("p",null,"Eventually, this cluster is upgraded and the object changes again."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: harvesterhci.io/v1beta1\ndefault: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.38","imagePullPolicy":"IfNotPresent"}\'  // default value, automatically updated after upgrade\nkind: Setting\nmetadata:\n  name: support-bundle-image\n...\nstatus: {}\nvalue: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.36","imagePullPolicy":"IfNotPresent"}\'  // your setting value is kept unchanged\n')),(0,a.kt)("p",null,"The value of ",(0,a.kt)("inlineCode",{parentName:"p"},"tag")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field is ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.0.36"),", while the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"tag")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field is ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.0.38"),"."),(0,a.kt)("p",null,"To clear the outdated setting and use the default image tag, run the following command, remove the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field, and save the changes."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ kubectl edit settings.harvesterhci.io support-bundle-image\n")),(0,a.kt)("p",null,"The object appears as follows after the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field is removed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: harvesterhci.io/v1beta1\ndefault: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.38","imagePullPolicy":"IfNotPresent"}\'\nkind: Setting\nmetadata:\n  name: support-bundle-image\n...\nstatus: {}\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("strong",{parentName:"p"},"Use the default value")," button on the Harvester UI can be used to copy the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field to the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(50182).Z,width:"1856",height:"1054"})),(0,a.kt)("p",null,"The object appears as follows after the changes are saved."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'apiVersion: harvesterhci.io/v1beta1\ndefault: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.38","imagePullPolicy":"IfNotPresent"}\'  // default\nkind: Setting\nmetadata:\n  name: support-bundle-image\n...\nstatus: {}\nvalue: \'{"repository":"rancher/support-bundle-kit","tag":"v0.0.38","imagePullPolicy":"IfNotPresent"}\'  // copied from default\n')),(0,a.kt)("p",null,"When the cluster is upgraded in the future, the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field may become outdated again because the default image tag is likely to change."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The value of ",(0,a.kt)("inlineCode",{parentName:"p"},"tag")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field is always based on the image that is packed into the Harvester ISO. This field is automatically updated whenever the cluster is upgraded.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field is used when the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field is not set or is left empty. Harvester checks if the default image is stored in the cluster and is up-to-date.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Configuring this setting is not required. If you decide to specify a different image tag in the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field, remember that this tag may become outdated when the cluster is upgraded.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Use the command ",(0,a.kt)("inlineCode",{parentName:"p"},"$ kubectl edit settings.harvesterhci.io support-bundle-image")," to clear the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The ",(0,a.kt)("strong",{parentName:"p"},"Use the default value")," button on the Harvester UI only copies the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field to the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field. You may use this to replace an outdated image tag, but the copied tag will eventually become outdated as well (when the cluster is upgraded and the ",(0,a.kt)("inlineCode",{parentName:"p"},"default")," field is updated).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If your cluster is in an air-gapped environment and you specified a non-default image tag in the ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," field, ensure that the image is available in the local ",(0,a.kt)("a",{parentName:"p",href:"#containerd-registry"},"containerd registry"),". Harvester is unable to ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/troubleshooting/harvester#generate-a-support-bundle"},"generate a support bundle")," if the image is not available.")))),(0,a.kt)("h3",{id:"support-bundle-namespaces"},(0,a.kt)("inlineCode",{parentName:"h3"},"support-bundle-namespaces")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Additional namespaces that you can use when ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/troubleshooting/harvester#generate-a-support-bundle"},"generating a support bundle"),". "),(0,a.kt)("p",null,"By default, the support bundle only collects resources from the following predefined namespaces:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"cattle-dashboards"),(0,a.kt)("li",{parentName:"ul"},"cattle-fleet-local-system"),(0,a.kt)("li",{parentName:"ul"},"cattle-fleet-system"),(0,a.kt)("li",{parentName:"ul"},"cattle-fleet-clusters-system"),(0,a.kt)("li",{parentName:"ul"},"cattle-monitoring-system"),(0,a.kt)("li",{parentName:"ul"},"fleet-local"),(0,a.kt)("li",{parentName:"ul"},"harvester-system"),(0,a.kt)("li",{parentName:"ul"},"local"),(0,a.kt)("li",{parentName:"ul"},"longhorn-system"),(0,a.kt)("li",{parentName:"ul"},"cattle-logging-system")),(0,a.kt)("p",null,"Namespaces that you select are appended to the predefined namespaces list."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": None"),(0,a.kt)("h3",{id:"support-bundle-timeout"},(0,a.kt)("inlineCode",{parentName:"h3"},"support-bundle-timeout")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Number of minutes Harvester allows for the completion of the support bundle generation process."),(0,a.kt)("p",null,"The process is considered to have failed when the data collection and file packing tasks are not completed within the configured number of minutes. Harvester does not continue or retry support bundle generation processes that have timed out. When the value is ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),", the timeout feature is disabled."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"10")),(0,a.kt)("h3",{id:"support-bundle-expiration"},(0,a.kt)("inlineCode",{parentName:"h3"},"support-bundle-expiration")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.3.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Number of minutes Harvester waits before deleting a support bundle that has been packaged but not downloaded (either deliberately or unsuccessfully) or retained."),(0,a.kt)("p",null,"You can specify a value greater than or equal to 0. When the value is 0, Harvester uses the default value."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"30")),(0,a.kt)("h3",{id:"support-bundle-node-collection-timeout"},(0,a.kt)("inlineCode",{parentName:"h3"},"support-bundle-node-collection-timeout")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.3.1 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Number of minutes Harvester allows for collection of logs and configurations (Harvester) on the nodes for the support bundle. "),(0,a.kt)("p",null,"If the collection process is not completed within the allotted time, Harvester still allows you to download the support bundle (without the uncollected data). You can specify a value greater than or equal to 0. When the value is 0, Harvester uses the default value."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"30")),(0,a.kt)("h3",{id:"upgrade-checker-enabled"},(0,a.kt)("inlineCode",{parentName:"h3"},"upgrade-checker-enabled")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that automatically checks for available Harvester upgrades."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"true")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"false\n")),(0,a.kt)("h3",{id:"upgrade-checker-url"},(0,a.kt)("inlineCode",{parentName:"h3"},"upgrade-checker-url")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": URL used to check for available Harvester upgrades."),(0,a.kt)("p",null,"This setting can only be used if the ",(0,a.kt)("inlineCode",{parentName:"p"},"upgrade-checker-enabled")," setting is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"https://harvester-upgrade-responder.rancher.io/v1/checkupgrade")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://your.upgrade.checker-url/v99/checkupgrade\n")),(0,a.kt)("h3",{id:"upgrade-config"},(0,a.kt)("inlineCode",{parentName:"h3"},"upgrade-config")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Upgrade-related configuration."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},'{"imagePreloadOption":{"strategy":{"type":"sequential"}}, "restoreVM": false}')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and fields"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"imagePreloadOption"),": Options for the image preloading phase."),(0,a.kt)("p",{parentName:"li"},"The full ISO contains the core operating system components and all required container images. Harvester can preload these container images to each node during installation and upgrades. When workloads are scheduled to management and worker nodes, the container images are ready to use.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"strategy"),": Image preload strategy.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"type"),": Type of image preload strategy."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"sequential"),": Harvester preloads the container images from the target ISO to each node. This is the default option.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"skip"),": Harvester does not preload the container images from the target ISO to each node. ",(0,a.kt)("strong",{parentName:"p"},"Do not use this option in production environments.")),(0,a.kt)("admonition",{parentName:"li",title:"important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"If you decide to use ",(0,a.kt)("inlineCode",{parentName:"p"},"skip"),", ensure that the following requirements are met:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"You have a private container registry that contains all required images."),(0,a.kt)("li",{parentName:"ul"},"Your cluster has high-speed internet access and is able to pull all images from Docker Hub when necessary. ")),(0,a.kt)("p",{parentName:"admonition"},"Note any potential internet service interruptions and how close you are to reaching your ",(0,a.kt)("a",{parentName:"p",href:"https://www.docker.com/increase-rate-limits/"},"Docker Hub rate limit"),". Failure to download any of the required images may cause the upgrade to fail and may leave the cluster in a middle state."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"parallel")," (",(0,a.kt)("strong",{parentName:"p"},"experimental"),"): Nodes preload images in batches. You can adjust this using the ",(0,a.kt)("inlineCode",{parentName:"p"},"concurrency")," option.")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"concurrency"),": Number of nodes that can simultaneously preload images. This option takes effect only when ",(0,a.kt)("inlineCode",{parentName:"p"},"type")," is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"parallel"),"."),(0,a.kt)("p",{parentName:"li"},"The default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),", which is equivalent to following the cluster's node counts. Using ",(0,a.kt)("inlineCode",{parentName:"p"},"0")," allows the system to dynamically follow the scale of the cluster. Values higher than the cluster's node counts are treated as ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),", while lower values are considered invalid and are rejected by Harvester."),(0,a.kt)("admonition",{parentName:"li",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Harvester deploys an upgrade-repo service on the cluster that serves as an HTTP server for nodes that need to preload the container images. When a ",(0,a.kt)("inlineCode",{parentName:"p"},"concurrency")," value is set, each batch of nodes downloads the container images from this upgrade-repo in parallel. Because of this, you must consider the speed of the Harvester management network and the read speed of the default disk for Longhorn."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"restoreVM"),": Option that enables Harvester to automatically restore running VMs after a single-node cluster is upgraded. The default value is ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),", which causes all VMs to be stopped after the upgrade is completed. When set to ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),", Harvester restarts VMs that were running before the upgrade was started. VMs that were paused before the upgrade are not restarted."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "imagePreloadOption": {\n    "strategy": {\n      "type": "parallel",\n      "concurrency": 2\n    }\n  },\n  "restoreVM": true\n}\n')),(0,a.kt)("h3",{id:"vip-pools"},(0,a.kt)("inlineCode",{parentName:"h3"},"vip-pools")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": Deprecated as of v1.2.0 (Use ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/networking/ippool"},"IP pools")," instead.)"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Global or namespace-specific IP address pools of the VIP by CIDR or IP range."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"{}")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "default": "172.16.0.0/24,172.16.1.0/24",\n  "demo": "172.16.2.50-172.16.2.100,172.16.2.150-172.16.3.200"\n}\n')),(0,a.kt)("h3",{id:"vm-force-reset-policy"},(0,a.kt)("inlineCode",{parentName:"h3"},"vm-force-reset-policy")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that allows you to force rescheduling of a VM when the node that it is running on becomes unavailable. "),(0,a.kt)("p",null,"When the state of the node changes to ",(0,a.kt)("inlineCode",{parentName:"p"},"Not Ready"),", the VM is force deleted and rescheduled to an available node after the configured number of seconds."),(0,a.kt)("p",null,"When the node becomes unavailable or is powered off, the VM only restarts and does not migrate."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},'{"enable":true, "period":300}')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "enable": "true",\n  "period": 300\n}\n')),(0,a.kt)("h3",{id:"volume-snapshot-class"},(0,a.kt)("inlineCode",{parentName:"h3"},"volume-snapshot-class")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": VolumeSnapshotClassName for the VolumeSnapshot and VolumeSnapshotContent when restoring a VM to a namespace that does not contain the source VM."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"longhorn")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"longhorn")),(0,a.kt)("hr",null),(0,a.kt)("p",null,"\xa0"),(0,a.kt)("h2",{id:"ui-settings"},"UI Settings"),(0,a.kt)("h3",{id:"branding"},(0,a.kt)("inlineCode",{parentName:"h3"},"branding")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Versions"),": v1.2.0 and later"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting allows you to globally rebrand the Harvester UI by customizing the product name, logos, and color scheme."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("strong",{parentName:"p"},"Harvester")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Because this setting is part of the ",(0,a.kt)("inlineCode",{parentName:"p"},"settings.management.cattle.io")," custom resource, you cannot configure any of the supported options (for example, ",(0,a.kt)("inlineCode",{parentName:"p"},"Logo")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Primary Color"),") using a ",(0,a.kt)("a",{parentName:"p",href:"/v1.4/install/harvester-configuration#system_settings"},"Harvester configuration")," file.")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"containerd-registry",src:n(53682).Z,width:"2732",height:"1750"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported options and values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Private Label"),': Product name or other text that replaces "Harvester" in most locations on the Harvester UI.'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Logo"),": Logo image in the top-level navigation header. You must upload logos for both light and dark modes."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Favicon"),": Small image displayed next to the page title in the browser tab."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Primary Color"),": Main color used throughout the Harvester UI."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Link Color"),": Color used for link text throughout the Harvester UI.")),(0,a.kt)("h3",{id:"ui-index"},(0,a.kt)("inlineCode",{parentName:"h3"},"ui-index")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": HTML index location for the Harvester UI."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"https://releases.rancher.com/harvester-ui/dashboard/latest/index.html")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://your.static.dashboard-ui/index.html\n")),(0,a.kt)("h3",{id:"ui-path"},(0,a.kt)("inlineCode",{parentName:"h3"},"ui-path")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Path that describes the location of ",(0,a.kt)("inlineCode",{parentName:"p"},"index.html"),", which is used to access the Harvester UI."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ui-path")," serves as the entry point to the Harvester UI and is active only in the following situations:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The value of ",(0,a.kt)("inlineCode",{parentName:"li"},"ui-source")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"bundled"),"."),(0,a.kt)("li",{parentName:"ul"},"The value of ",(0,a.kt)("inlineCode",{parentName:"li"},"ui-source")," is ",(0,a.kt)("inlineCode",{parentName:"li"},"auto"),", but ",(0,a.kt)("inlineCode",{parentName:"li"},"ui-index")," is unable to retrieve the HTML file.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"/usr/share/harvester/harvester")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Examples"),":"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"index.html")," is stored in a container in ",(0,a.kt)("inlineCode",{parentName:"p"},"/home/samplefolder"),". The value of ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-source")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"bundled"),"."),(0,a.kt)("p",null,"Scenario 1: The value of ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-path")," is ",(0,a.kt)("inlineCode",{parentName:"p"},"/home/samplefolder"),". Whenever you access the Harvester UI, the content of ",(0,a.kt)("inlineCode",{parentName:"p"},"/home/samplefolder/index.html")," is displayed."),(0,a.kt)("p",null,"Scenario 2: The value of ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-index")," points to a page that is unavailable or non-existent (for example, ",(0,a.kt)("inlineCode",{parentName:"p"},"notexist-example.com/index.html"),"). When you access the Harvester UI for the first time, the content of ",(0,a.kt)("inlineCode",{parentName:"p"},"/home/samplefolder/index.html")," is displayed. However, if you modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-index")," setting to use the default value and access the Harvester UI again, the content of ",(0,a.kt)("inlineCode",{parentName:"p"},"/home/samplefolder/index.html")," is still displayed (even if the new ",(0,a.kt)("inlineCode",{parentName:"p"},"ui-index")," value points to an available page). For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/harvester/harvester/issues/6066"},"Issue #6066"),"."),(0,a.kt)("h3",{id:"ui-plugin-index"},(0,a.kt)("inlineCode",{parentName:"h3"},"ui-plugin-index")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": JavaScript address for the Harvester plugin (when accessing Harvester from Rancher)."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"https://releases.rancher.com/harvester-ui/plugin/harvester-latest/harvester-latest.umd.min.js")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://your.static.dashboard-ui/*.umd.min.js\n")),(0,a.kt)("h3",{id:"ui-source"},(0,a.kt)("inlineCode",{parentName:"h3"},"ui-source")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Definition"),": Setting that allows you to configure how to load the UI source."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Default value"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"auto")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Supported values"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"auto"),": Automatically detects whether to use the bundled UI or not."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"external"),": Uses the external UI source."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"bundled"),": Uses the bundled UI source.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"external\n")))}d.isMDXComponent=!0},53682:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/branding-49ad191233c03030305a64308b3449a2.png"},57984:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/containerd-registry-de62fe2333d8d53e52d54da6a2e8233b.png"},8065:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/support-bundle-image-set-customized-value-0ae4bda57893362c8d16fe7794414c1b.png"},50182:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/support-bundle-image-set-use-default-value-1728268437c87b630165c26b13e2d56f.png"}}]);